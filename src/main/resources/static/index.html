<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RabbitMQ Message Sender</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #4CAF50;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        .section {
            margin-bottom: 30px;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .response {
            margin-top: 10px;
            padding: 10px;
            background-color: #e9f7ef;
            border-left: 4px solid #4CAF50;
            display: none;
        }
        .error {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
        }
    </style>
</head>
<body>
    <h1>RabbitMQ Message Sender</h1>
    
    <div class="section">
        <h2>Simple Hello Message</h2>
        <form id="helloForm">
            <div>
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <button type="submit">Send Hello Message</button>
        </form>
        <div id="helloResponse" class="response"></div>
    </div>
    
    <div class="section">
        <h2>Picture Message</h2>
        <form id="pictureForm">
            <div>
                <label for="pictureName">Name:</label>
                <input type="text" id="pictureName" required>
            </div>
            <div>
                <label for="pictureType">Type:</label>
                <select id="pictureType" required>
                    <option value="jpg">jpg</option>
                    <option value="png">png</option>
                    <option value="svg">svg</option>
                </select>
            </div>
            <div>
                <label for="pictureSource">Source:</label>
                <select id="pictureSource" required>
                    <option value="mobile">mobile</option>
                    <option value="web">web</option>
                </select>
            </div>
            <div>
                <label for="pictureSize">Size (bytes):</label>
                <input type="number" id="pictureSize" required min="1">
            </div>
            <button type="submit">Send Picture Message</button>
        </form>
        <div id="pictureResponse" class="response"></div>
    </div>
    
    <div class="section">
        <h2>Employee Message</h2>
        <form id="employeeForm">
            <div>
                <label for="employeeId">ID:</label>
                <input type="text" id="employeeId" required>
            </div>
            <div>
                <label for="employeeName">Name:</label>
                <input type="text" id="employeeName" required>
            </div>
            <div>
                <label for="employeeBirthday">Birthday:</label>
                <input type="date" id="employeeBirthday" required>
            </div>
            <button type="submit">Send Employee Message</button>
        </form>
        <div id="employeeResponse" class="response"></div>
    </div>
    
    <div class="section">
        <h2>Furniture Message</h2>
        <form id="furnitureForm">
            <div>
                <label for="furnitureName">Name:</label>
                <input type="text" id="furnitureName" required>
            </div>
            <div>
                <label for="furnitureColour">Colour:</label>
                <input type="text" id="furnitureColour" required>
            </div>
            <div>
                <label for="furnitureMaterial">Material:</label>
                <input type="text" id="furnitureMaterial" required>
            </div>
            <div>
                <label for="furniturePrice">Price:</label>
                <input type="number" id="furniturePrice" required min="0">
            </div>
            <button type="submit">Send Furniture Message</button>
        </form>
        <div id="furnitureResponse" class="response"></div>
    </div>
    
    <div class="section">
        <h2>Furniture Topic Message</h2>
        <p>Uses a topic exchange with routing keys in the format: <code>colour.material.price-category</code></p>
        <form id="furnitureTopicForm">
            <div>
                <label for="furnitureTopicName">Name:</label>
                <input type="text" id="furnitureTopicName" required>
            </div>
            <div>
                <label for="furnitureTopicColour">Colour:</label>
                <select id="furnitureTopicColour" required>
                    <option value="">-- Select Colour --</option>
                    <option value="red">Red</option>
                    <option value="blue">Blue</option>
                    <option value="green">Green</option>
                    <option value="yellow">Yellow</option>
                    <option value="white">White</option>
                    <option value="black">Black</option>
                    <option value="brown">Brown</option>
                    <option value="silver">Silver</option>
                </select>
                <div class="hint">The color forms the first part of the routing key</div>
            </div>
            <div>
                <label for="furnitureTopicMaterial">Material:</label>
                <select id="furnitureTopicMaterial" required>
                    <option value="">-- Select Material --</option>
                    <option value="wood">Wood</option>
                    <option value="plastic">Plastic</option>
                    <option value="steel">Steel</option>
                </select>
                <div class="hint">These materials match our defined routing bindings</div>
            </div>
            <div>
                <label for="furnitureTopicPrice">Price:</label>
                <input type="number" id="furnitureTopicPrice" required min="0" placeholder="≥100 will route to 'expensive'">
                <div class="hint">Price ≥ 100 will route to both material and expensive queues</div>
            </div>
            <button type="submit">Send via Topic Exchange</button>
        </form>
        <div id="furnitureTopicResponse" class="response"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Base API URL
            const apiUrl = '/api/messages';
            
            // Hello form handler
            document.getElementById('helloForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const name = document.getElementById('name').value;
                
                fetch(`${apiUrl}/hello?name=${encodeURIComponent(name)}`, {
                    method: 'POST'
                })
                .then(response => response.json())
                .then(data => {
                    const responseElement = document.getElementById('helloResponse');
                    responseElement.textContent = `Response: ${JSON.stringify(data)}`;
                    responseElement.style.display = 'block';
                    responseElement.classList.remove('error');
                })
                .catch(error => {
                    const responseElement = document.getElementById('helloResponse');
                    responseElement.textContent = `Error: ${error.message}`;
                    responseElement.style.display = 'block';
                    responseElement.classList.add('error');
                });
            });
            
            // Picture form handler
            document.getElementById('pictureForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const picture = {
                    name: document.getElementById('pictureName').value,
                    type: document.getElementById('pictureType').value,
                    source: document.getElementById('pictureSource').value,
                    size: parseInt(document.getElementById('pictureSize').value)
                };
                
                fetch(`${apiUrl}/picture`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(picture)
                })
                .then(response => response.json())
                .then(data => {
                    const responseElement = document.getElementById('pictureResponse');
                    responseElement.textContent = `Response: ${JSON.stringify(data)}`;
                    responseElement.style.display = 'block';
                    responseElement.classList.remove('error');
                })
                .catch(error => {
                    const responseElement = document.getElementById('pictureResponse');
                    responseElement.textContent = `Error: ${error.message}`;
                    responseElement.style.display = 'block';
                    responseElement.classList.add('error');
                });
            });
            
            // Employee form handler
            document.getElementById('employeeForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const employee = {
                    id: document.getElementById('employeeId').value,
                    name: document.getElementById('employeeName').value,
                    birthday: document.getElementById('employeeBirthday').value
                };
                
                fetch(`${apiUrl}/employee`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(employee)
                })
                .then(response => response.json())
                .then(data => {
                    const responseElement = document.getElementById('employeeResponse');
                    responseElement.textContent = `Response: ${JSON.stringify(data)}`;
                    responseElement.style.display = 'block';
                    responseElement.classList.remove('error');
                })
                .catch(error => {
                    const responseElement = document.getElementById('employeeResponse');
                    responseElement.textContent = `Error: ${error.message}`;
                    responseElement.style.display = 'block';
                    responseElement.classList.add('error');
                });
            });
            
            // Furniture form handler
            document.getElementById('furnitureForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const furniture = {
                    name: document.getElementById('furnitureName').value,
                    colour: document.getElementById('furnitureColour').value,
                    material: document.getElementById('furnitureMaterial').value,
                    price: parseInt(document.getElementById('furniturePrice').value)
                };
                
                fetch(`${apiUrl}/furniture`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(furniture)
                })
                .then(response => response.json())
                .then(data => {
                    const responseElement = document.getElementById('furnitureResponse');
                    responseElement.textContent = `Response: ${JSON.stringify(data)}`;
                    responseElement.style.display = 'block';
                    responseElement.classList.remove('error');
                })
                .catch(error => {
                    const responseElement = document.getElementById('furnitureResponse');
                    responseElement.textContent = `Error: ${error.message}`;
                    responseElement.style.display = 'block';
                    responseElement.classList.add('error');
                });
            });

            // Furniture topic form handler
            document.getElementById('furnitureTopicForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const furnitureTopic = {
                    name: document.getElementById('furnitureTopicName').value,
                    colour: document.getElementById('furnitureTopicColour').value,
                    material: document.getElementById('furnitureTopicMaterial').value,
                    price: parseInt(document.getElementById('furnitureTopicPrice').value)
                };
                
                fetch(`${apiUrl}/furniture/topic`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(furnitureTopic)
                })
                .then(response => response.json())
                .then(data => {
                    const responseElement = document.getElementById('furnitureTopicResponse');
                    responseElement.textContent = `Response: ${JSON.stringify(data)}`;
                    responseElement.style.display = 'block';
                    responseElement.classList.remove('error');
                })
                .catch(error => {
                    const responseElement = document.getElementById('furnitureTopicResponse');
                    responseElement.textContent = `Error: ${error.message}`;
                    responseElement.style.display = 'block';
                    responseElement.classList.add('error');
                });
            });
        });
    </script>
</body>
</html>